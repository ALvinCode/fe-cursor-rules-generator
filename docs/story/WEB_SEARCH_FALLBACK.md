# 网络搜索与备用方案

## 🌐 网络搜索机制

### 实现方式

1. **识别缺失的技术栈**
   - 对比项目技术栈与匹配框架的技术栈
   - 找出项目使用但框架规则中没有的技术栈

2. **网络搜索最佳实践**
   - 使用 `web_search` 工具搜索技术栈的最佳实践
   - 搜索查询格式：`{技术栈} {类别} best practices cursor rules`
   - 解析搜索结果，提取最佳实践

3. **集成到规则生成**
   - 将网络搜索找到的最佳实践补充到规则中
   - 按类别添加到相应的规则文件

### 搜索流程

```
项目技术栈 → 框架匹配 → 识别缺失技术栈 → 网络搜索 → 解析结果 → 补充到规则
```

## 🔄 备用方案（无网络情况）

### 触发条件

- 网络搜索失败
- 无网络连接
- 搜索结果为空

### 备用方案内容

内置的通用最佳实践，覆盖常见技术栈：

1. **TypeScript**
   - 类型安全：使用明确的类型定义，避免 `any`
   - 接口和类型别名的最佳使用场景

2. **React**
   - 组件最佳实践：函数组件、Hooks、性能优化
   - 组件拆分和单一职责原则

3. **Vue**
   - Composition API 最佳实践
   - 组件模板和逻辑分离

4. **Node.js**
   - 项目结构：模块化、环境变量、错误处理

5. **Express**
   - 路由最佳实践：模块化、中间件、异步处理

### 备用方案优先级

- **高优先级**：TypeScript、React、Vue（核心框架）
- **中优先级**：Node.js、Express（常用后端技术）

### 扩展备用方案

可以通过以下方式扩展备用方案：

1. **添加更多技术栈**
   - 在 `getFallbackPractices` 方法中添加新的技术栈
   - 提供通用的最佳实践内容

2. **从本地文件加载**
   - 创建 `fallback-practices.json` 文件
   - 存储常用技术栈的最佳实践
   - 在无网络时从文件加载

3. **使用缓存**
   - 缓存之前的网络搜索结果
   - 在无网络时使用缓存结果

## 📋 实现细节

### 网络搜索器 (`best-practice-web-searcher.ts`)

- `searchBestPractices()`: 搜索最佳实践
- `parseWebSearchResults()`: 解析搜索结果
- `buildSearchQuery()`: 构建搜索查询

### 备用方案 (`rules-generator.ts`)

- `getFallbackPractices()`: 获取备用最佳实践
- `identifyMissingTechStacks()`: 识别缺失的技术栈

## 🎯 使用建议

1. **有网络时**：优先使用网络搜索，获取最新最佳实践
2. **无网络时**：自动切换到备用方案，确保功能可用
3. **混合模式**：部分技术栈使用网络搜索，部分使用备用方案

## 🔧 配置选项

未来可以添加配置选项：

- `enableWebSearch`: 是否启用网络搜索（默认：true）
- `fallbackOnly`: 仅使用备用方案（默认：false）
- `cacheWebResults`: 缓存网络搜索结果（默认：true）

